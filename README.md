Вот обновлённый отчёт для **практической работы №2** на основе представленного кода и требований:

---

## Отчет по практике №2

**Студент:** Дзюба Полина Михайловна
**Группа:** ИКБО-23-24
**Вариант:** 8

---

### **Цель работы**

Создать консольное Python-приложение, которое:

* Позволяет пользователю задавать параметры анализа пакета через конфигурационный CSV-файл;
* Находит и выводит прямые зависимости указанного пакета из репозитория Alpine Linux (HTTP или Git);
* Формирует основу для последующей визуализации графа зависимостей.

---

### **Выполненные задачи**

#### **Этап 1 — Минимальный прототип с конфигурацией**

**Цель:** Реализовать CLI-приложение с настройкой параметров через CSV-файл.

**Реализовано:**

* Создан конфигурационный файл `config_1.csv` формата:

  ```
param,value
package_name,axel
repository_url,https://dl-cdn.alpinelinux.org/alpine/v3.15/main
repo_mode,prod
package_version, 3.0.0
ascii_output,false
  ```

* Реализована функция чтения и парсинга CSV (`read_config`):

  * Проверка корректности заголовков;
  * Обработка ошибок при отсутствии файла, неправильной структуре и некорректных данных.

* Добавлена валидация параметров (`validate_config`):

  * Проверяется наличие обязательных ключей (`package_name`, `repository_url`, `repo_mode`, `package_version`);
  * Контролируются допустимые значения (`repo_mode ∈ {test, prod}`, `ascii_output ∈ {true, false}`).

* Программа выводит считанные параметры в консоль:

  **Пример вывода:**

  ```
  === Конфигурация ===
  package_name = openssl
  repository_url = https://dl-cdn.alpinelinux.org/alpine/latest-stable/main
  repo_mode = prod
  package_version = 3.0.0
  ascii_output = false
  ```

**Результат:**
Программа корректно считывает и валидирует параметры из CSV-файла. Ошибки обрабатываются безопасно и с информативными сообщениями.

---

#### **Этап 2 — Сбор и анализ данных**

**Цель:** Реализовать получение и разбор информации о пакетах и зависимостях.

**Реализовано:**

* Загрузка индекса пакетов `APKINDEX.tar.gz` из репозитория (`download_apkindex_http`);
* Автоматическое определение типа репозитория:

  * `http` — загрузка с URL;
  * `git` — клонирование через `git clone` с последующим поиском APKINDEX или `.apk` файлов.
* Распаковка архива и извлечение текстовых данных с помощью `gzip`, `tarfile` и `BytesIO`;
* Парсер `find_package_in_apkindex`, выделяющий поля:

  * `P:` — имя пакета;
  * `V:` — версия;
  * `D:` — список зависимостей.
* Поддержка поиска нужного пакета по имени и версии;
* Вывод прямых зависимостей в читаемом виде (`print_dependencies`).

**Пример вывода:**

```
=== openssl-3.3.2-r4 ===
Зависимости:
  - libcrypto3
  - libssl3
  - ca-certificates-bundle
```

**Дополнительно реализовано:**

* Поддержка работы с git-репозиториями (клонирование во временный каталог, поиск `.apk` и чтение `.PKGINFO`);
* Очистка временных директорий после выполнения;
* Обработка ошибок сети и отсутствующих файлов.

---

### **Технические особенности реализации**

**Язык программирования:** Python 3
**Используемые стандартные библиотеки:**

* `csv` — чтение и парсинг конфигурации;
* `sys` — завершение программы при ошибках;
* `urllib.request` — загрузка данных по HTTP;
* `gzip`, `tarfile`, `io.BytesIO` — распаковка архивов;
* `os`, `subprocess`, `tempfile`, `shutil` — работа с файловой системой и git;
* `ssl` — корректная работа HTTPS на macOS.

**Сторонние библиотеки не использовались.**

---

### **Структура программы**

| Функция                    | Назначение                                      |
| -------------------------- | ----------------------------------------------- |
| `read_config`              | Чтение и парсинг CSV-файла конфигурации         |
| `validate_config`          | Проверка корректности параметров                |
| `print_config`             | Отображение настроек в консоли                  |
| `check_repo_type`          | Определение типа репозитория (`http` / `git`)   |
| `download_apkindex_http`   | Загрузка APKINDEX из HTTP-репозитория           |
| `clone_git_repo`           | Клонирование git-репозитория во временную папку |
| `find_package_in_apkindex` | Поиск пакета и зависимостей                     |
| `print_dependencies`       | Форматированный вывод зависимостей              |
| `get_dependencies`         | Основная логика анализа                         |
| `main`                     | Точка входа программы                           |

---

### **Результаты работы программы**

* Приложение корректно работает с HTTP и Git репозиториями Alpine Linux.
* Реализован анализ зависимостей пакетов.
* Обеспечена стабильная обработка ошибок и вывод информативных сообщений.
* Код полностью написан на стандартных библиотеках Python.

---

### **Выводы**

В ходе выполнения работы:

* Разработан консольный инструмент для анализа пакетов Alpine Linux;
* Реализована гибкая настройка через CSV;
* Освоена работа с сетевыми запросами, архивами и файловой системой;



